!function(t){"use strict";var e,o="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?"touchstart":"click",s=0,i=0,n=0,c=function(e,s,i){i||(t(document).off(o+".closeboxes"),t(window).off("scroll.selectmenu"+e+" resize.selectmenu"+e),t(".custom_select._"+e).off(o+".openlist"+e).undelegate(".option",o+".selectoption"+e)),t(".custom_select._"+e).remove(),s.show()},l=function(t,e){t.find(".select_opts").css({"max-height":e+"px","overflow-x":"hidden"}).addClass("scrolling")},a=function(e,o,s){var i=o.find(".option_title"),n=o.find(".select_opts"),c=i.outerHeight(),a=i.offset().top-t(window).scrollTop(),d=t(window).scrollTop()+t(window).height()-(i.offset().top+c),r=d>0?d:0,u=s?s+20:parseInt(n[0].style.height),p=function(){n.css({"max-height":"none","overflow-x":"auto"}).removeClass("scrolling")},f=function(t){!s&&u>t?l(o,t):s||p()},h=function(t){-20>t&&o.hasClass("opened")&&o.trigger("click")};u>r-20&&a>r-20?(n.removeClass("under").addClass("above").css({bottom:c}),h(d),f(a-20)):(n.removeClass("above").addClass("under").css({bottom:"initial"}),h(a),f(r-20))},d=function(d,r){var u=t(d).is("select")?t(d):t(d).find("select"),p=u.find("option"),f="first"==r.title?p.first().text():r.title,h=r.height,m=r.arrow?'<div class="arrow" style="position: absolute; right: 10px; top: 45%;"></div>':"";if(r.destroy)return u.each(function(){n=++n}),c(n,u,r.rebuild),!1;if(u.hasClass("customized")&&!r.rebuild)return!1;r.rebuild&&(t(".customized").each(function(){n=++n}),c(n,u,r.rebuild)),u.hide().addClass("customized").each(function(){s=++s,t(this).before('<div class="custom_select _'+s+'" style="cursor: pointer;position: relative;"><div class="option_title" style="position: relative;"></div><div class="select_opts" style="display: none;position:absolute;width: 100%;z-index:1000"></div></div>'),e=t(".custom_select._"+s+" .select_opts")}),p.each(function(){i=++i,t(this).attr("data-option",i),e.append('<div class="option" data-option="'+i+'">'+t(this).text()+"</div>")});var v=t(".custom_select._"+s),g=v.find(".option_title");if(g.text(f).append(m),r.width&&v.css({width:r.width}),v.on(o+".openlist"+s,function(){var e=t(".custom_select").not(this);t(this).toggleClass("opened").find(".select_opts").stop().slideToggle(150),e.hasClass("opened")&&e.removeClass("opened").find(".select_opts").slideUp(150)}),t(".custom_select._"+s).on(o+".selectoption"+s,".option",function(e){var o=t(e.target).data("option"),s=t(e.target).parent().parent().next();t(e.target).parent().find(".option").removeClass("current"),t(this).addClass("current"),s.find("option").attr("selected",!1),s.find("option[data-option="+o+"]").attr("selected",!0),t(e.target).parent().prev().text(t(e.target).text()).append(m)}),r.selected){var w=v.find(".option:first");w.addClass("current"),u.find("option:first").attr("selected",!0),g.text(w.text()).append(m)}h&&l(v,h),e.css({height:e.outerHeight()}),a(s,v,h),setTimeout(function(){t(window).on("scroll.selectmenu"+s+" resize.selectmenu"+s,function(){a(s,v,h)})},1)};t(document).on(o+".closeboxes",function(e){var o=t(".custom_select");o.not(e.target)&&!o.has(e.target).length&&o.hasClass("opened")&&(o.removeClass("opened").find(".select_opts").slideUp(150),o.find(".arrow").removeClass("up"))}),t.fn.customSelect=function(e,o){var s=t.extend({},t.fn.customSelect.defaults,e,o);return this.each(function(){new d(t(this),s)})},t.fn.customSelect.defaults={title:"Please choose",selected:!1,height:!1,width:!1,arrow:!0,rebuild:!1,destroy:!1},t(function(){t("div[data-select-box]").customSelect()})}(jQuery);
